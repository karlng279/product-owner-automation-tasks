# Component Patterns

> Building maintainable React components with ShadCN UI

## Overview

This guide covers component architecture patterns for building modern React applications using ShadCN UI, TailwindCSS, and Next.js 14. Learn how to create consistent, reusable, and accessible components.

**Philosophy:** Build components that are simple, composable, and follow a consistent pattern across your application.

---

## Table of Contents

1. [Component Architecture](#component-architecture)
2. [Component Types](#component-types)
3. [Getting Started](#getting-started)
4. [Key Principles](#key-principles)
5. [Documentation Index](#documentation-index)

---

## Component Architecture

### The Component Hierarchy

```
┌─────────────────────────────────────┐
│         Pages (app/)                │  ← Route components
│  - Compose layouts and features     │
└─────────────────────────────────────┘
              ↓
┌─────────────────────────────────────┐
│      Layout Components              │  ← Site structure
│  - Header, Footer, Sidebar          │
└─────────────────────────────────────┘
              ↓
┌─────────────────────────────────────┐
│    Feature Components               │  ← Domain-specific
│  - UserCard, ProductList            │
└─────────────────────────────────────┘
              ↓
┌─────────────────────────────────────┐
│     Shared Components               │  ← Reusable
│  - DataTable, SearchInput           │
└─────────────────────────────────────┘
              ↓
┌─────────────────────────────────────┐
│       UI Components (ShadCN)        │  ← Primitives
│  - Button, Card, Input              │
└─────────────────────────────────────┘
```

### Component Composition

Build complex UIs by composing simple components:

```typescript
// ✅ Good - Composition
<Card>
  <CardHeader>
    <CardTitle>Users</CardTitle>
  </CardHeader>
  <CardContent>
    <DataTable data={users} columns={columns} />
  </CardContent>
</Card>

// ❌ Bad - Monolithic
<UsersCardWithTable users={users} />
```

---

## Component Types

### 1. UI Components (ShadCN)

**Purpose:** Basic building blocks (buttons, inputs, cards)

**Location:** `components/ui/`

**Characteristics:**
- Auto-generated by ShadCN CLI
- Fully styled with TailwindCSS
- Accessible by default
- Customizable via props

**Example:**
```typescript
import { Button } from '@/components/ui/button'

<Button variant="default" size="lg">
  Click me
</Button>
```

**See:** [shadcn-setup.md](shadcn-setup.md) | [shadcn-usage.md](shadcn-usage.md)

---

### 2. Layout Components

**Purpose:** Site structure (header, footer, sidebar, navigation)

**Location:** `components/layout/`

**Characteristics:**
- Used in `app/layout.tsx`
- Persistent across pages
- Handle navigation
- Manage responsive behavior

**Example:**
```typescript
// components/layout/header.tsx
export function Header() {
  return (
    <header className="border-b">
      <div className="container flex h-16 items-center">
        <MainNav />
        <UserMenu />
      </div>
    </header>
  )
}
```

**See:** [layout-components.md](layout-components.md)

---

### 3. Shared Components

**Purpose:** Reusable across multiple features

**Location:** `components/shared/`

**Characteristics:**
- Used by 2+ features
- Generic and configurable
- Well-documented props
- Include common patterns

**Example:**
```typescript
// components/shared/data-table.tsx
export function DataTable<T>({ data, columns }: DataTableProps<T>) {
  // TanStack Table implementation
}
```

**See:** [table-patterns.md](table-patterns.md) | [common-patterns.md](common-patterns.md)

---

### 4. Feature Components

**Purpose:** Domain-specific components

**Location:** `app/[feature]/components/`

**Characteristics:**
- Used by single feature
- Can use feature-specific types
- Tightly coupled to business logic
- Colocated with pages

**Example:**
```typescript
// app/users/components/user-card.tsx
export function UserCard({ user }: { user: User }) {
  return (
    <Card>
      <CardHeader>
        <UserAvatar user={user} />
        <CardTitle>{user.name}</CardTitle>
      </CardHeader>
      <CardContent>
        <p>{user.email}</p>
        <StatusBadge status={user.status} />
      </CardContent>
    </Card>
  )
}
```

---

### 5. Page Components

**Purpose:** Route-level components

**Location:** `app/[route]/page.tsx`

**Characteristics:**
- Map to URLs
- Fetch data (Server Components)
- Compose layouts and features
- Handle page-level state

**Example:**
```typescript
// app/users/page.tsx
export default async function UsersPage() {
  const users = await getUsers()

  return (
    <div className="space-y-6">
      <PageHeader title="Users" />
      <UserFilters />
      <UserTable users={users} />
    </div>
  )
}
```

**See:** [page-components.md](page-components.md)

---

## Getting Started

### 1. Install ShadCN

```bash
npx shadcn-ui@latest init
```

**See:** [shadcn-setup.md](shadcn-setup.md) for detailed setup

### 2. Add Components

```bash
npx shadcn-ui@latest add button card input
```

### 3. Use in Your App

```typescript
import { Button } from '@/components/ui/button'
import { Card } from '@/components/ui/card'

export default function Page() {
  return (
    <Card>
      <Button>Click me</Button>
    </Card>
  )
}
```

---

## Key Principles

### 1. Composition Over Configuration

**✅ Good:**
```typescript
<Card>
  <CardHeader>
    <CardTitle>Title</CardTitle>
    <CardDescription>Description</CardDescription>
  </CardHeader>
  <CardContent>
    Content here
  </CardContent>
</Card>
```

**❌ Bad:**
```typescript
<Card
  title="Title"
  description="Description"
  content="Content here"
  showHeader={true}
  showFooter={false}
/>
```

### 2. Single Responsibility

Each component should do one thing well:

**✅ Good:**
```typescript
function UserAvatar({ user }) { ... }
function UserName({ user }) { ... }
function UserEmail({ user }) { ... }

function UserCard({ user }) {
  return (
    <Card>
      <UserAvatar user={user} />
      <UserName user={user} />
      <UserEmail user={user} />
    </Card>
  )
}
```

**❌ Bad:**
```typescript
function UserCard({ user, showAvatar, showEmail, avatarSize, ... }) {
  // Too many concerns
}
```

### 3. Prop Drilling vs Composition

**✅ Good - Composition:**
```typescript
<UserCard>
  <UserAvatar src={user.avatar} />
  <UserInfo name={user.name} email={user.email} />
</UserCard>
```

**❌ Bad - Prop Drilling:**
```typescript
<UserCard
  avatarSrc={user.avatar}
  userName={user.name}
  userEmail={user.email}
/>
```

### 4. TypeScript Props

Always type your props:

```typescript
interface UserCardProps {
  user: User
  onEdit?: () => void
  onDelete?: () => void
  showActions?: boolean
}

export function UserCard({
  user,
  onEdit,
  onDelete,
  showActions = true
}: UserCardProps) {
  // ...
}
```

### 5. Client vs Server Components

**Default to Server Components:**
```typescript
// Server Component (default)
export default async function UsersPage() {
  const users = await getUsers() // Can fetch directly
  return <UserList users={users} />
}
```

**Use Client Components for interactivity:**
```typescript
'use client'

export function UserFilters() {
  const [filter, setFilter] = useState('') // Needs state
  return <Input onChange={e => setFilter(e.target.value)} />
}
```

### 6. Accessibility

ShadCN components are accessible by default, maintain this:

```typescript
// ✅ Good - Semantic and accessible
<button
  type="button"
  aria-label="Close dialog"
  onClick={onClose}
>
  <X className="h-4 w-4" />
</button>

// ❌ Bad - Not accessible
<div onClick={onClose}>
  <X />
</div>
```

---

## Common Patterns

### Loading States

```typescript
export default function UsersPage() {
  return (
    <Suspense fallback={<LoadingSpinner />}>
      <UserList />
    </Suspense>
  )
}
```

### Error Handling

```typescript
// app/users/error.tsx
'use client'

export default function Error({ error, reset }: {
  error: Error
  reset: () => void
}) {
  return (
    <ErrorMessage
      title="Failed to load users"
      message={error.message}
      onRetry={reset}
    />
  )
}
```

### Empty States

```typescript
export function UserList({ users }: { users: User[] }) {
  if (users.length === 0) {
    return (
      <EmptyState
        icon={<Users />}
        title="No users found"
        description="Get started by adding your first user"
        action={<Button>Add User</Button>}
      />
    )
  }

  return <DataTable data={users} columns={columns} />
}
```

**See:** [common-patterns.md](common-patterns.md)

---

## Component Checklist

Before considering a component complete, verify:

- [ ] TypeScript types defined for props
- [ ] Proper semantic HTML used
- [ ] Accessible (keyboard navigation, ARIA labels)
- [ ] Responsive (works on mobile/tablet/desktop)
- [ ] Loading states handled
- [ ] Error states handled
- [ ] Empty states handled (if applicable)
- [ ] Follows naming conventions
- [ ] Documented with JSDoc (for complex components)
- [ ] Reusable and composable

---

## Documentation Index

### Setup & Usage
- **[ShadCN Setup](shadcn-setup.md)** - Installation and configuration
- **[ShadCN Usage](shadcn-usage.md)** - Using ShadCN components

### Component Types
- **[Layout Components](layout-components.md)** - Headers, footers, sidebars
- **[Page Components](page-components.md)** - Page structure patterns
- **[Common Patterns](common-patterns.md)** - Modals, toasts, loading states

### Specialized Patterns
- **[Form Patterns](form-patterns.md)** - Forms with React Hook Form + Zod
- **[Table Patterns](table-patterns.md)** - TanStack Table implementation

---

## Quick Reference

### When to Use What

**ShadCN UI Components:**
- Basic interactions (buttons, inputs)
- Standard layouts (cards, dialogs)
- Form elements

**Shared Components:**
- Complex patterns (data tables)
- Reusable across features
- Generic utilities

**Feature Components:**
- Domain-specific logic
- Used in one feature only
- Business rules embedded

### Component Decision Tree

```
Is it provided by ShadCN?
├─ Yes → Use from components/ui/
└─ No → Is it used by multiple features?
   ├─ Yes → Create in components/shared/
   └─ No → Create in app/[feature]/components/
```

---

## Best Practices Summary

1. **Composition** - Build complex from simple
2. **Single Responsibility** - One component, one purpose
3. **Type Safety** - Always use TypeScript
4. **Accessibility** - Semantic HTML, ARIA labels
5. **Server First** - Default to Server Components
6. **Error Handling** - Handle loading, error, empty states
7. **Reusability** - Make components generic when shared
8. **Testing** - Test behavior, not implementation

---

**Related Documentation:**
- [Project Structure](../project-structure/README.md)
- [State Management](../state-management/README.md)
- [Quick Start Guide](../QUICK_START.md)

**External Resources:**
- [ShadCN UI](https://ui.shadcn.com/)
- [React Patterns](https://reactpatterns.com/)
- [Next.js Components](https://nextjs.org/docs/app/building-your-application/rendering/server-components)

---

**Last Updated:** 2025-12-19
